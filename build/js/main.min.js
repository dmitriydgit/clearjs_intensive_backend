var galleryController=function(){"use strict";return class{constructor(t,e,i,s){this.model=t,this.view=e,this.observer=i,this.utils=s,this.pageConfig={itemsPerPage:10,currentPage:0},this.init()}initListeners(){this.view.DOMElements.userList.addEventListener("click",this.tableLineHandler.bind(this)),this.view.DOMElements.search.addEventListener("keyup",this.searchHandler.bind(this)),this.view.DOMElements.emailDropdown.addEventListener("click",this.sortingHandler.bind(this)),this.view.DOMElements.roleDropdown.addEventListener("click",this.sortingHandler.bind(this)),this.view.DOMElements.nextBtn.addEventListener("click",this.getNextPageHandler.bind(this))}tableLineHandler(t){t.preventDefault();let e=t.target.getAttribute("data-row-id");e?this.openDetail(e):this.view.selectTableLine(t)}openDetail(t){this.model.getUserById(t).then(t=>{this.view.showSingleUser(t)})}searchHandler(t){t.preventDefault();let e=t.target.value;13===t.keyCode&&(0==e.length||e.length>2)&&(this.pageConfig.currentPage=0,this.view.clearList(),this.view.buildUsersList(this.getNextPage(),this.utils.sortingConfig.Find))}sortingHandler(t){t.preventDefault(),this.view.updateButtonText(t),this.applySortingMethod(this.view.getSortingType(t))}getNextPageHandler(t){t&&t.preventDefault(),this.view.buildUsersList(this.getNextPage()),this.isLastPage()}applySortingMethod(t){t&&(this.pageConfig.currentPage=0,this.view.clearList(),this.view.buildUsersList(this.getNextPage(),this.utils.sortingConfig[t]))}getNextPage(){let t=this.pageConfig.itemsPerPage*this.pageConfig.currentPage,e=this.pageConfig.itemsPerPage+t;return this.pageConfig.currentPage++,this.model.usersListData.slice(t,e)}isLastPage(){this.isMaxPage()&&(this.view.hideNextPage(),this.countStats())}isMaxPage(){return this.pageConfig.currentPage*this.pageConfig.itemsPerPage>=this.model.usersListData.length}countStats(){let t=this.model.usersListData.reduce((t,e)=>("Admin"==e.role?t.admins++:t.users++,t),{admins:0,users:0});this.view.showStats(t)}init(){console.log("gallery inited")}}}(),galleryModel=function(){"use strict";return class{constructor(){this.getUrl="http://localhost:3000/usersList",this.usersListData=[]}getUserList(){return fetch(this.getUrl).then(t=>t.json()).then(t=>(console.log("Data is loaded"),this.usersListData=t,t))}getUserById(t){return fetch(this.getUrl+"/"+t).then(t=>t.json()).then(t=>t)}saveUser(t){}updateUser(t){}}}(),galleryView=function(){"use strict";return class{constructor(){this.DOMElements={}}}}(),observer=function(){"use strict";return class{constructor(){this.events={}}subscribeEvent(t,e){this.events[t]=e}callEvent(t,e){this.events[t]&&this.events[t](e)}}}(),loginController=function(){"use strict";return class{constructor(t,e,i){this.model=t,this.view=e,this.utils=i}initListeners(){this.view.DOMElements.logInBtn.addEventListener("click",this.loginHandler.bind(this)),this.view.DOMElements.logOutBtn.addEventListener("click",this.logoutHandler.bind(this))}loginHandler(t){t.preventDefault();let e=this.view.getCredentials();this.model.validate(e)?this.model.login(e).then(t=>{t.loginStatus?(this.view.hideMsg(),this.view.showLogout(),this.utils.navigateTo("gallery")):this.view.showMsg(this.model.getErrorMsg())}):this.view.showMsg(this.model.getErrorMsg())}logoutHandler(){this.view.hideLogout(),this.model.logout(),this.utils.navigateTo("")}init(){console.log("login inited")}}}(),loginModel=function(){"use strict";return class{constructor(){this.loginUrl="http://localhost:3000/login",this.emailPattern=/^\w+@\w+\.\w{2,4}$/i,this.passwordPattern=/^[a-zA-Z0-9]{8,30}$/,this.errorMsg=null,this.errorMsgMap={empty:"Пожалуйста заполните поля логин и пароль",loginError:"Логин введен неверно. Только латинские буквы.",passError:"Пароль введен неверно. Тольк латинские буквы, цифры. Длина не менее 8 символов",missmatch:"Неправильные логин или пароль."}}validate(t){return this.isEmpty(t)&&this.isEmailAssertPattern(t)&&this.isPasswordAssertPattern(t)}login(t){let e={headers:{"Content-type":"application/json; charset=utf-8"},method:"post",body:JSON.stringify(t)};return fetch(this.loginUrl,e).then(t=>t.json()).then(e=>(e.loginStatus?localStorage.setItem("credentials",JSON.stringify(t)):this.setErrorMsg("missmatch"),e))}getErrorMsg(){return this.errorMsg}setErrorMsg(t){return this.errorMsg=this.errorMsgMap[t],!1}isEmpty(t){return t.login&&t.password||this.setErrorMsg("empty")}isEmailAssertPattern(t){return this.emailPattern.test(t.login)||this.setErrorMsg("loginError")}isPasswordAssertPattern(t){return this.passwordPattern.test(t.password)||this.setErrorMsg("passError")}logout(){localStorage.removeItem("credentials")}}}(),loginView=function(){"use strict";return class{constructor(){this.DOMElements={login:document.querySelector("#inputEmail"),password:document.querySelector("#inputPassword"),alert:document.querySelector(".alert"),logInBtn:document.querySelector("#log-in-btn"),logOutBtn:document.querySelector("#log-out-btn")}}showMsg(t){t&&(this.DOMElements.alert.classList.remove("hide"),this.DOMElements.alert.innerHTML=t)}hideMsg(){this.DOMElements.alert.classList.add("hide")}showLogout(){this.DOMElements.logOutBtn.classList.remove("hide")}hideLogout(){this.DOMElements.logOutBtn.classList.add("hide")}getCredentials(){return{login:this.DOMElements.login.value,password:this.DOMElements.password.value}}}}(),mainController=function(){"use strict";return class{constructor(t,e,i){this.model=t,this.view=e,this.utils=i}init(){console.log("main inited")}}}(),mainModel=function(){"use strict";return class{constructor(){}}}(),mainView=function(){"use strict";return class{constructor(){this.DOMElements={}}}}(),profileController=function(){"use strict";return class{constructor(t,e,i){this.model=t,this.view=e,this.utils=i}init(){console.log("profile inited")}}}(),profileModel=function(){"use strict";return class{constructor(){}}}(),profileView=function(){"use strict";return class{constructor(){this.DOMElements={}}}}();!function(){"use strict";class t{constructor(){this.sortingConfig={A:t=>(t.sort((t,e)=>t.email>e.email?1:-1),t),Z:t=>(t.sort((t,e)=>t.email<e.email?1:-1),t),Admin:t=>t.filter(t=>"Admin"==t.role),User:t=>t.filter(t=>"User"==t.role),Find:t=>{let e=new RegExp(event.target.value,"i");return t.filter(t=>e.test(t.name))}}}static showView(t){t.forEach(t=>{t.classList.remove("hide")})}static hideView(t){t.forEach(t=>{t.classList.add("hide")})}static navigateTo(t){window.location.hash="#"+t}static isLoggedIn(){return!0}static activateBtn(t){t.forEach(t=>{t.parentElement.classList.add("active")})}static disactivateBtn(t){t.forEach(t=>{t.parentElement.classList.remove("active")})}}let e=document.querySelector("#main-view"),i=document.querySelector("#profile-view"),s=document.querySelector("#gallery-view"),n=document.querySelector("#mainPageBtn"),r=document.querySelector("#profileBtn"),a=document.querySelector("#galleryBtn"),o={},l={mainPage:{show:()=>{t.showView([e]),t.hideView([i,s]),t.activateBtn([n]),t.disactivateBtn([r,a])},init:()=>{new class{constructor(t,e,i){this.model=t,this.view=e,this.utils=i}init(){console.log("main inited")}}(new class{constructor(){}},new class{constructor(){this.DOMElements={}}},new t).init()}},profile:{show:()=>{t.showView([i]),t.hideView([e,s]),t.activateBtn([r]),t.disactivateBtn([n,a]),console.log("Contacts route is loaded")},init:()=>{}},gallery:{show:()=>{t.showView([s]),t.hideView([e,i]),t.activateBtn([a]),t.disactivateBtn([n,r]),console.log("Main route is loaded")},init:()=>{let e=new class{constructor(){this.events={}}subscribeEvent(t,e){this.events[t]=e}callEvent(t,e){this.events[t]&&this.events[t](e)}};new class{constructor(t,e,i,s){this.model=t,this.view=e,this.observer=i,this.utils=s,this.pageConfig={itemsPerPage:10,currentPage:0},this.init()}initListeners(){this.view.DOMElements.userList.addEventListener("click",this.tableLineHandler.bind(this)),this.view.DOMElements.search.addEventListener("keyup",this.searchHandler.bind(this)),this.view.DOMElements.emailDropdown.addEventListener("click",this.sortingHandler.bind(this)),this.view.DOMElements.roleDropdown.addEventListener("click",this.sortingHandler.bind(this)),this.view.DOMElements.nextBtn.addEventListener("click",this.getNextPageHandler.bind(this))}tableLineHandler(t){t.preventDefault();let e=t.target.getAttribute("data-row-id");e?this.openDetail(e):this.view.selectTableLine(t)}openDetail(t){this.model.getUserById(t).then(t=>{this.view.showSingleUser(t)})}searchHandler(t){t.preventDefault();let e=t.target.value;13===t.keyCode&&(0==e.length||e.length>2)&&(this.pageConfig.currentPage=0,this.view.clearList(),this.view.buildUsersList(this.getNextPage(),this.utils.sortingConfig.Find))}sortingHandler(t){t.preventDefault(),this.view.updateButtonText(t),this.applySortingMethod(this.view.getSortingType(t))}getNextPageHandler(t){t&&t.preventDefault(),this.view.buildUsersList(this.getNextPage()),this.isLastPage()}applySortingMethod(t){t&&(this.pageConfig.currentPage=0,this.view.clearList(),this.view.buildUsersList(this.getNextPage(),this.utils.sortingConfig[t]))}getNextPage(){let t=this.pageConfig.itemsPerPage*this.pageConfig.currentPage,e=this.pageConfig.itemsPerPage+t;return this.pageConfig.currentPage++,this.model.usersListData.slice(t,e)}isLastPage(){this.isMaxPage()&&(this.view.hideNextPage(),this.countStats())}isMaxPage(){return this.pageConfig.currentPage*this.pageConfig.itemsPerPage>=this.model.usersListData.length}countStats(){let t=this.model.usersListData.reduce((t,e)=>("Admin"==e.role?t.admins++:t.users++,t),{admins:0,users:0});this.view.showStats(t)}init(){console.log("gallery inited")}}(new class{constructor(){this.getUrl="http://localhost:3000/usersList",this.usersListData=[]}getUserList(){return fetch(this.getUrl).then(t=>t.json()).then(t=>(console.log("Data is loaded"),this.usersListData=t,t))}getUserById(t){return fetch(this.getUrl+"/"+t).then(t=>t.json()).then(t=>t)}saveUser(t){}updateUser(t){}},new class{constructor(){this.DOMElements={}}},e,new t)}}};function h(){let e=document.location.hash.replace(/^#/,"");e&&!t.isLoggedIn()?t.navigateTo(""):function(t){if(o[t])o[t]();else{let e=l[t];e&&(e.init(),e.show(),o[t]=e.show)}}(e)}window.addEventListener("load",h),window.addEventListener("hashchange",h)}();var router=function(t){"use strict";class e{constructor(){this.sortingConfig={A:t=>(t.sort((t,e)=>t.email>e.email?1:-1),t),Z:t=>(t.sort((t,e)=>t.email<e.email?1:-1),t),Admin:t=>t.filter(t=>"Admin"==t.role),User:t=>t.filter(t=>"User"==t.role),Find:t=>{let e=new RegExp(event.target.value,"i");return t.filter(t=>e.test(t.name))}}}static showView(t){t.forEach(t=>{t.classList.remove("hide")})}static hideView(t){t.forEach(t=>{t.classList.add("hide")})}static navigateTo(t){window.location.hash="#"+t}static isLoggedIn(){return!0}static activateBtn(t){t.forEach(t=>{t.parentElement.classList.add("active")})}static disactivateBtn(t){t.forEach(t=>{t.parentElement.classList.remove("active")})}}let i=document.querySelector("#main-view"),s=document.querySelector("#profile-view"),n=document.querySelector("#gallery-view"),r=document.querySelector("#mainPageBtn"),a=document.querySelector("#profileBtn"),o=document.querySelector("#galleryBtn"),l={},h={mainPage:{show:()=>{e.showView([i]),e.hideView([s,n]),e.activateBtn([r]),e.disactivateBtn([a,o])},init:()=>{new class{constructor(t,e,i){this.model=t,this.view=e,this.utils=i}init(){console.log("main inited")}}(new class{constructor(){}},new class{constructor(){this.DOMElements={}}},new e).init()}},profile:{show:()=>{e.showView([s]),e.hideView([i,n]),e.activateBtn([a]),e.disactivateBtn([r,o]),console.log("Contacts route is loaded")},init:()=>{}},gallery:{show:()=>{e.showView([n]),e.hideView([i,s]),e.activateBtn([o]),e.disactivateBtn([r,a]),console.log("Main route is loaded")},init:()=>{let t=new class{constructor(){this.events={}}subscribeEvent(t,e){this.events[t]=e}callEvent(t,e){this.events[t]&&this.events[t](e)}};new class{constructor(t,e,i,s){this.model=t,this.view=e,this.observer=i,this.utils=s,this.pageConfig={itemsPerPage:10,currentPage:0},this.init()}initListeners(){this.view.DOMElements.userList.addEventListener("click",this.tableLineHandler.bind(this)),this.view.DOMElements.search.addEventListener("keyup",this.searchHandler.bind(this)),this.view.DOMElements.emailDropdown.addEventListener("click",this.sortingHandler.bind(this)),this.view.DOMElements.roleDropdown.addEventListener("click",this.sortingHandler.bind(this)),this.view.DOMElements.nextBtn.addEventListener("click",this.getNextPageHandler.bind(this))}tableLineHandler(t){t.preventDefault();let e=t.target.getAttribute("data-row-id");e?this.openDetail(e):this.view.selectTableLine(t)}openDetail(t){this.model.getUserById(t).then(t=>{this.view.showSingleUser(t)})}searchHandler(t){t.preventDefault();let e=t.target.value;13===t.keyCode&&(0==e.length||e.length>2)&&(this.pageConfig.currentPage=0,this.view.clearList(),this.view.buildUsersList(this.getNextPage(),this.utils.sortingConfig.Find))}sortingHandler(t){t.preventDefault(),this.view.updateButtonText(t),this.applySortingMethod(this.view.getSortingType(t))}getNextPageHandler(t){t&&t.preventDefault(),this.view.buildUsersList(this.getNextPage()),this.isLastPage()}applySortingMethod(t){t&&(this.pageConfig.currentPage=0,this.view.clearList(),this.view.buildUsersList(this.getNextPage(),this.utils.sortingConfig[t]))}getNextPage(){let t=this.pageConfig.itemsPerPage*this.pageConfig.currentPage,e=this.pageConfig.itemsPerPage+t;return this.pageConfig.currentPage++,this.model.usersListData.slice(t,e)}isLastPage(){this.isMaxPage()&&(this.view.hideNextPage(),this.countStats())}isMaxPage(){return this.pageConfig.currentPage*this.pageConfig.itemsPerPage>=this.model.usersListData.length}countStats(){let t=this.model.usersListData.reduce((t,e)=>("Admin"==e.role?t.admins++:t.users++,t),{admins:0,users:0});this.view.showStats(t)}init(){console.log("gallery inited")}}(new class{constructor(){this.getUrl="http://localhost:3000/usersList",this.usersListData=[]}getUserList(){return fetch(this.getUrl).then(t=>t.json()).then(t=>(console.log("Data is loaded"),this.usersListData=t,t))}getUserById(t){return fetch(this.getUrl+"/"+t).then(t=>t.json()).then(t=>t)}saveUser(t){}updateUser(t){}},new class{constructor(){this.DOMElements={}}},t,new e)}}};return t.updateRoute=function(){let t=document.location.hash.replace(/^#/,"");t&&!e.isLoggedIn()?e.navigateTo(""):function(t){if(l[t])l[t]();else{let e=h[t];e&&(e.init(),e.show(),l[t]=e.show)}}(t)},t}({}),utils=function(){"use strict";return class{constructor(){this.sortingConfig={A:t=>(t.sort((t,e)=>t.email>e.email?1:-1),t),Z:t=>(t.sort((t,e)=>t.email<e.email?1:-1),t),Admin:t=>t.filter(t=>"Admin"==t.role),User:t=>t.filter(t=>"User"==t.role),Find:t=>{let e=new RegExp(event.target.value,"i");return t.filter(t=>e.test(t.name))}}}static showView(t){t.forEach(t=>{t.classList.remove("hide")})}static hideView(t){t.forEach(t=>{t.classList.add("hide")})}static navigateTo(t){window.location.hash="#"+t}static isLoggedIn(){return!0}static activateBtn(t){t.forEach(t=>{t.parentElement.classList.add("active")})}static disactivateBtn(t){t.forEach(t=>{t.parentElement.classList.remove("active")})}}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbGxlcnkuY29udHJvbGxlci5qcyIsImdhbGxlcnkubW9kZWwuanMiLCJnYWxsZXJ5LnZpZXcuanMiLCJvYnNlcnZlci5qcyIsImxvZ2luLmNvbnRyb2xsZXIuanMiLCJsb2dpbi5tb2RlbC5qcyIsImxvZ2luLnZpZXcuanMiLCJtYWluLmNvbnRyb2xsZXIuanMiLCJtYWluLnZpZXcuanMiLCJwcm9maWxlLmNvbnRyb2xsZXIuanMiLCJwcm9maWxlLnZpZXcuanMiLCJ1dGlscy5qcyIsInJvdXRlci5qcyIsIm1haW5QYWdlL21haW4uY29udHJvbGxlci5qcyIsIm1haW5QYWdlL21haW4udmlldy5qcyIsImdhbGxlcnkvb2JzZXJ2ZXIuanMiLCJnYWxsZXJ5L2dhbGxlcnkuY29udHJvbGxlci5qcyIsImdhbGxlcnkvZ2FsbGVyeS5tb2RlbC5qcyIsImdhbGxlcnkvZ2FsbGVyeS52aWV3LmpzIiwiYXBwLmpzIl0sIm5hbWVzIjpbIm1vZGVsIiwidmlldyIsIm9ic2VydmVyIiwidXRpbHMiLCJwYWdlQ29uZmlnIiwiaW5pdCIsIkRPTUVsZW1lbnRzIiwidXNlckxpc3QiLCJhZGRFdmVudExpc3RlbmVyIiwidGhpcyIsInRhYmxlTGluZUhhbmRsZXIiLCJiaW5kIiwic2VhcmNoIiwic2VhcmNoSGFuZGxlciIsImVtYWlsRHJvcGRvd24iLCJzb3J0aW5nSGFuZGxlciIsInJvbGVEcm9wZG93biIsIm5leHRCdG4iLCJnZXROZXh0UGFnZUhhbmRsZXIiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiaXNCdXR0b24iLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJvcGVuRGV0YWlsIiwic2VsZWN0VGFibGVMaW5lIiwiYnV0dG9uSWQiLCJnZXRVc2VyQnlJZCIsInRoZW4iLCJkYXRhIiwic2hvd1NpbmdsZVVzZXIiLCJ2YWx1ZSIsImtleUNvZGUiLCJsZW5ndGgiLCJjdXJyZW50UGFnZSIsImNsZWFyTGlzdCIsImJ1aWxkVXNlcnNMaXN0IiwiZ2V0TmV4dFBhZ2UiLCJzb3J0aW5nQ29uZmlnIiwidXBkYXRlQnV0dG9uVGV4dCIsImFwcGx5U29ydGluZ01ldGhvZCIsImdldFNvcnRpbmdUeXBlIiwiaXNMYXN0UGFnZSIsInNvcnRpbmdUeXBlIiwic3RhcnQiLCJpdGVtc1BlclBhZ2UiLCJlbmQiLCJ1c2Vyc0xpc3REYXRhIiwic2xpY2UiLCJpc01heFBhZ2UiLCJoaWRlTmV4dFBhZ2UiLCJjb3VudFN0YXRzIiwic3RhdHMiLCJyZWR1Y2UiLCJzdW0iLCJpdGVtIiwicm9sZSIsImFkbWlucyIsInVzZXJzIiwic2hvd1N0YXRzIiwibG9nIiwiZ2V0VXJsIiwiZmV0Y2giLCJyZXNwb25jZSIsImpzb24iLCJpZCIsImNvdW50ZXIiLCJldmVudHMiLCJuYW1lIiwiZnVuYyIsImFyZyIsImxvZ0luQnRuIiwibG9naW5IYW5kbGVyIiwibG9nT3V0QnRuIiwibG9nb3V0SGFuZGxlciIsImUiLCJjcmVkZW50aWFscyIsImdldENyZWRlbnRpYWxzIiwidmFsaWRhdGUiLCJsb2dpbiIsImxvZ2luU3RhdHVzIiwiaGlkZU1zZyIsInNob3dMb2dvdXQiLCJuYXZpZ2F0ZVRvIiwic2hvd01zZyIsImdldEVycm9yTXNnIiwiaGlkZUxvZ291dCIsImxvZ291dCIsImxvZ2luVXJsIiwiZW1haWxQYXR0ZXJuIiwicGFzc3dvcmRQYXR0ZXJuIiwiZXJyb3JNc2ciLCJlcnJvck1zZ01hcCIsImlzRW1wdHkiLCJpc0VtYWlsQXNzZXJ0UGF0dGVybiIsImlzUGFzc3dvcmRBc3NlcnRQYXR0ZXJuIiwib3B0aW9ucyIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXRJdGVtIiwic2V0RXJyb3JNc2ciLCJrZXkiLCJwYXNzd29yZCIsInRlc3QiLCJyZW1vdmVJdGVtIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibXNnIiwiYWxlcnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJpbm5lckhUTUwiLCJhZGQiLCJVdGlscyIsInBhZ2UiLCJzb3J0IiwiYSIsImIiLCJlbWFpbCIsImZpbHRlciIsImV4cCIsIlJlZ0V4cCIsInZpZXdzIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJyb3V0ZU5hbWUiLCJsb2NhdGlvbiIsImhhc2giLCJidG5zIiwicGFyZW50RWxlbWVudCIsIm1haW5QYWdlIiwicHJvZmlsZSIsImdhbGxlcnkiLCJtYWluUGFnZUJ0biIsInByb2ZpbGVCdG4iLCJnYWxsZXJ5QnRuIiwiYWN0aXZhdGVkUm91dGVzIiwicm91dGVDb25maWciLCJzaG93VmlldyIsImhpZGVWaWV3IiwiYWN0aXZhdGVCdG4iLCJkaXNhY3RpdmF0ZUJ0biIsInVwZGF0ZVJvdXRlIiwicmVwbGFjZSIsImlzTG9nZ2VkSW4iLCJyb3V0ZSIsInNob3ciLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiJ1RUFDZ0JBLEVBQU9DLEVBQU1DLEVBQVVDLFFBQzFCSCxNQUFRQSxPQUNSQyxLQUFPQSxPQUNQQyxTQUFXQSxPQUNYQyxNQUFRQSxPQUNSQyx5QkFDYyxlQUNYLFFBRUhDLDRCQUlOSixLQUFLSyxZQUFZQyxTQUFTQyxpQkFBaUIsUUFBU0MsS0FBS0MsaUJBQWlCQyxLQUFLRixZQUUvRVIsS0FBS0ssWUFBWU0sT0FBT0osaUJBQWlCLFFBQVNDLEtBQUtJLGNBQWNGLEtBQUtGLFlBQzFFUixLQUFLSyxZQUFZUSxjQUFjTixpQkFBaUIsUUFBU0MsS0FBS00sZUFBZUosS0FBS0YsWUFDbEZSLEtBQUtLLFlBQVlVLGFBQWFSLGlCQUFpQixRQUFTQyxLQUFLTSxlQUFlSixLQUFLRixZQUUzRVIsS0FBS0ssWUFBWVcsUUFBUVQsaUJBQWlCLFFBQVNDLEtBQUtTLG1CQUFtQlAsS0FBS0Ysd0JBR3hFVSxLQUNQQyxxQkFDUkMsRUFBV0YsRUFBTUcsT0FBT0MsYUFBYSxpQkFDOUJkLEtBQUtlLFdBQVdILEdBQVlaLEtBQUtSLEtBQUt3QixnQkFBZ0JOLGNBR3ZETyxHQUNDakIsS0FBS1QsTUFBTTJCLFlBQVlELEdBQVVFLEtBQU1DLFNBQ25DNUIsS0FBSzZCLGVBQWVELG1CQUluQlYsS0FDVkMscUJBQ0ZXLEVBQVFaLEVBQU1HLE9BQU9TLE1B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LHlCQU1yQnNELEtBQ05DLFFBQVFDLE1BQ0ZmLFVBQVVDLE9BQU8sMEJBSWpCWSxLQUNOQyxRQUFRQyxNQUNGZixVQUFVRyxJQUFJLDRCQUlaYSxVQUNQQyxTQUFTQyxLQUFNLElBQU1GLDZCQVNyQixxQkFHTUcsS0FDWkwsUUFBUUMsTUFDR0ssY0FBY3BCLFVBQVVHLElBQUksa0NBR3hCZ0IsS0FDZkwsUUFBUUMsTUFDR0ssY0FBY3BCLFVBQVVDLE9BQU8iLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBHYWxsZXJ5Q29udHJvbGxlciB7IFxyXG4gICAgY29uc3RydWN0b3IobW9kZWwsIHZpZXcsIG9ic2VydmVyLCB1dGlscykge1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcclxuICAgICAgICB0aGlzLnV0aWxzID0gdXRpbHM7XHJcbiAgICAgICAgdGhpcy5wYWdlQ29uZmlnID0ge1xyXG4gICAgICAgICAgICBpdGVtc1BlclBhZ2UgOiAxMCxcclxuXHRcdFx0Y3VycmVudFBhZ2U6IDBcclxuXHRcdH1cclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH0gICAgICAgIFxyXG5cclxuICAgIGluaXRMaXN0ZW5lcnMoKSB7XHJcblx0XHR0aGlzLnZpZXcuRE9NRWxlbWVudHMudXNlckxpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMudGFibGVMaW5lSGFuZGxlci5iaW5kKHRoaXMpKTtcclxuXHRcdFxyXG5cdFx0dGhpcy52aWV3LkRPTUVsZW1lbnRzLnNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5zZWFyY2hIYW5kbGVyLmJpbmQodGhpcykpO1xyXG5cdFx0dGhpcy52aWV3LkRPTUVsZW1lbnRzLmVtYWlsRHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuc29ydGluZ0hhbmRsZXIuYmluZCh0aGlzKSk7XHJcblx0XHR0aGlzLnZpZXcuRE9NRWxlbWVudHMucm9sZURyb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnNvcnRpbmdIYW5kbGVyLmJpbmQodGhpcykpO1xyXG5cdFx0XHJcbiAgICAgICAgdGhpcy52aWV3LkRPTUVsZW1lbnRzLm5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuZ2V0TmV4dFBhZ2VIYW5kbGVyLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHRhYmxlTGluZUhhbmRsZXIoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0bGV0IGlzQnV0dG9uID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtcm93LWlkXCIpO1xyXG5cdFx0aXNCdXR0b24gPyB0aGlzLm9wZW5EZXRhaWwoaXNCdXR0b24pIDogdGhpcy52aWV3LnNlbGVjdFRhYmxlTGluZShldmVudCk7XHJcblx0fVxyXG5cclxuXHRvcGVuRGV0YWlsKGJ1dHRvbklkKSB7XHJcblx0XHRsZXQgdXNlciA9IHRoaXMubW9kZWwuZ2V0VXNlckJ5SWQoYnV0dG9uSWQpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgdGhpcy52aWV3LnNob3dTaW5nbGVVc2VyKGRhdGEpO1xyXG4gICAgICAgIH0pOyBcdFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzZWFyY2hIYW5kbGVyKGV2ZW50KSB7XHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0bGV0IHZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xyXG5cdFx0aWYgKGV2ZW50LmtleUNvZGUgPT09IDEzICYmICh2YWx1ZS5sZW5ndGggPT0gMCB8fCB2YWx1ZS5sZW5ndGggPiAyKSkge1xyXG5cdFx0XHR0aGlzLnBhZ2VDb25maWcuY3VycmVudFBhZ2UgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuY2xlYXJMaXN0KCk7XHJcblx0XHRcdHRoaXMudmlldy5idWlsZFVzZXJzTGlzdCh0aGlzLmdldE5leHRQYWdlKCksIHRoaXMudXRpbHMuc29ydGluZ0NvbmZpZ1tcIkZpbmRcIl0pO1xyXG5cdFx0IH1cclxuXHR9XHJcblxyXG5cdHNvcnRpbmdIYW5kbGVyKGV2ZW50KSB7XHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0dGhpcy52aWV3LnVwZGF0ZUJ1dHRvblRleHQoZXZlbnQpO1xyXG5cdFx0dGhpcy5hcHBseVNvcnRpbmdNZXRob2QodGhpcy52aWV3LmdldFNvcnRpbmdUeXBlKGV2ZW50KSk7XHJcblx0fVxyXG4gICAgXHJcbiAgICBnZXROZXh0UGFnZUhhbmRsZXIoZXZlbnQpIHtcclxuICAgICAgICBldmVudCAmJiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMudmlldy5idWlsZFVzZXJzTGlzdCh0aGlzLmdldE5leHRQYWdlKCkpO1xyXG4gICAgICAgIHRoaXMuaXNMYXN0UGFnZSgpOyBcclxuICAgIH1cclxuXHJcblx0YXBwbHlTb3J0aW5nTWV0aG9kKHNvcnRpbmdUeXBlKSB7XHJcbiAgICAgICAgaWYgKCFzb3J0aW5nVHlwZSl7cmV0dXJufVxyXG5cdFx0dGhpcy5wYWdlQ29uZmlnLmN1cnJlbnRQYWdlID0gMDtcclxuICAgICAgICB0aGlzLnZpZXcuY2xlYXJMaXN0KCk7XHJcblx0XHR0aGlzLnZpZXcuYnVpbGRVc2Vyc0xpc3QodGhpcy5nZXROZXh0UGFnZSgpLCB0aGlzLnV0aWxzLnNvcnRpbmdDb25maWdbc29ydGluZ1R5cGVdKTtcclxuXHR9XHJcblxyXG4gICAgZ2V0TmV4dFBhZ2UoKXtcclxuXHRcdGxldCBzdGFydCA9IHRoaXMucGFnZUNvbmZpZy5pdGVtc1BlclBhZ2UgKiB0aGlzLnBhZ2VDb25maWcuY3VycmVudFBhZ2U7XHJcblx0XHRsZXQgZW5kID0gdGhpcy5wYWdlQ29uZmlnLml0ZW1zUGVyUGFnZSArIHN0YXJ0O1xyXG5cdFx0dGhpcy5wYWdlQ29uZmlnLmN1cnJlbnRQYWdlKys7XHJcblx0XHRyZXR1cm4gdGhpcy5tb2RlbC51c2Vyc0xpc3REYXRhLnNsaWNlKHN0YXJ0LCBlbmQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpc0xhc3RQYWdlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzTWF4UGFnZSgpKXtcclxuICAgICAgICAgICAgdGhpcy52aWV3LmhpZGVOZXh0UGFnZSgpO1x0XHJcbiAgICAgICAgICAgIHRoaXMuY291bnRTdGF0cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblx0aXNNYXhQYWdlKCkge1xyXG5cdFx0cmV0dXJuICh0aGlzLnBhZ2VDb25maWcuY3VycmVudFBhZ2UgKiB0aGlzLnBhZ2VDb25maWcuaXRlbXNQZXJQYWdlKSA+PSB0aGlzLm1vZGVsLnVzZXJzTGlzdERhdGEubGVuZ3RoO1xyXG5cdH1cclxuXHJcblx0Y291bnRTdGF0cygpe1xyXG5cdFx0bGV0IHN0YXRzID0gdGhpcy5tb2RlbC51c2Vyc0xpc3REYXRhLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiB7XHJcblx0XHRcdChpdGVtLnJvbGUgPT0gXCJBZG1pblwiKSA/IHN1bS5hZG1pbnMrKyA6XHRzdW0udXNlcnMrKztcclxuXHRcdFx0cmV0dXJuIHN1bTtcclxuXHRcdH0sIHthZG1pbnM6MCwgdXNlcnM6MH0pO1xyXG5cdFx0dGhpcy52aWV3LnNob3dTdGF0cyhzdGF0cyk7XHJcblx0fVxyXG5cdFxyXG5cdGluaXQoKXtcclxuXHRcdGNvbnNvbGUubG9nKFwiZ2FsbGVyeSBpbml0ZWRcIilcclxuICAgICAgICAvLyB0aGlzLm1vZGVsLmdldFVzZXJMaXN0KCkudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmluaXRMaXN0ZW5lcnMoKVxyXG4gICAgICAgIC8vICAgICB0aGlzLnZpZXcuYnVpbGRVc2Vyc0xpc3QodGhpcy5nZXROZXh0UGFnZSgpKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5pc0xhc3RQYWdlKCk7XHJcbiAgICAgICAgLy8gfSk7IFx0XHJcblx0fVxyXG4gICAgXHJcbn1cclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbGxlcnlNb2RlbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmdldFVybCA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvdXNlcnNMaXN0JztcclxuICAgICAgICB0aGlzLnVzZXJzTGlzdERhdGEgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VyTGlzdCgpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5nZXRVcmwpLnRoZW4ocmVzcG9uY2UgPT4gcmVzcG9uY2UuanNvbigpKVxyXG4gICAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRhdGEgaXMgbG9hZGVkXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnVzZXJzTGlzdERhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9KSAgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJCeUlkKGlkKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaCh0aGlzLmdldFVybCArIFwiL1wiICsgaWQpLnRoZW4ocmVzcG9uY2UgPT4gcmVzcG9uY2UuanNvbigpKVxyXG4gICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9KSAgICAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzYXZlVXNlcihpdGVtKSB7ICAgICAgICAgXHJcblxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB1cGRhdGVVc2VyKGNvdW50ZXIpIHtcclxuICAgICAgXHJcbiAgICB9XHJcblxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbGxlcnlWaWV3IHsgICAgICAgIFxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ET01FbGVtZW50cyA9IHtcclxuICAgICAgICB9OyAgICAgXHJcbiAgICAgICBcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ldmVudHMgPSB7fTtcbiAgICB9XG5cbiAgICBzdWJzY3JpYmVFdmVudChuYW1lLCBmdW5jKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzW25hbWVdID0gZnVuYztcbiAgICB9XG4gICAgXG4gICAgY2FsbEV2ZW50KG5hbWUsIGFyZykge1xuICAgICAgICBpZiAodGhpcy5ldmVudHNbbmFtZV0pIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzW25hbWVdKGFyZyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBMb2dpbkNvbnRyb2xsZXIgeyBcclxuICAgIGNvbnN0cnVjdG9yKG1vZGVsLCB2aWV3LCB1dGlscykge1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xyXG4gICAgICAgIHRoaXMudXRpbHMgPSB1dGlscztcclxuICAgICAgICAvL3RoaXMuaW5pdExpc3RlbmVycygpO1xyXG4gICAgfSBcclxuXHJcbiAgICBpbml0TGlzdGVuZXJzKCkgeyBcclxuICAgICAgICB0aGlzLnZpZXcuRE9NRWxlbWVudHMubG9nSW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMubG9naW5IYW5kbGVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMudmlldy5ET01FbGVtZW50cy5sb2dPdXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMubG9nb3V0SGFuZGxlci5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBsb2dpbkhhbmRsZXIoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBsZXQgY3JlZGVudGlhbHMgPSB0aGlzLnZpZXcuZ2V0Q3JlZGVudGlhbHMoKTtcclxuICAgICAgICBpZiAodGhpcy5tb2RlbC52YWxpZGF0ZShjcmVkZW50aWFscykpe1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLmxvZ2luKGNyZWRlbnRpYWxzKS50aGVuKFxyXG4gICAgICAgICAgICAgICAgZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubG9naW5TdGF0dXMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuaGlkZU1zZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc2hvd0xvZ291dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnV0aWxzLm5hdmlnYXRlVG8oXCJnYWxsZXJ5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zaG93TXNnKHRoaXMubW9kZWwuZ2V0RXJyb3JNc2coKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5zaG93TXNnKHRoaXMubW9kZWwuZ2V0RXJyb3JNc2coKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvZ291dEhhbmRsZXIoKSB7XHJcbiAgICAgICAgdGhpcy52aWV3LmhpZGVMb2dvdXQoKTtcclxuICAgICAgICB0aGlzLm1vZGVsLmxvZ291dCgpO1xyXG4gICAgICAgIHRoaXMudXRpbHMubmF2aWdhdGVUbyhcIlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkgeyBcclxuXHRcdFx0Y29uc29sZS5sb2coXCJsb2dpbiBpbml0ZWRcIilcclxuXHRcdH1cclxuICAgIFxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZ2luTW9kZWwge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMubG9naW5VcmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9sb2dpblwiO1xyXG4gICAgICAgIHRoaXMuZW1haWxQYXR0ZXJuID0gL15cXHcrQFxcdytcXC5cXHd7Miw0fSQvaTtcclxuICAgICAgICB0aGlzLnBhc3N3b3JkUGF0dGVybiA9IC9eW2EtekEtWjAtOV17OCwzMH0kLztcclxuICAgICAgICB0aGlzLmVycm9yTXNnID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVycm9yTXNnTWFwID0ge1xyXG4gICAgICAgICAgICBcImVtcHR5XCIgICAgIDogJ9Cf0L7QttCw0LvRg9C50YHRgtCwINC30LDQv9C+0LvQvdC40YLQtSDQv9C+0LvRjyDQu9C+0LPQuNC9INC4INC/0LDRgNC+0LvRjCcsXHJcbiAgICAgICAgICAgIFwibG9naW5FcnJvclwiOiAn0JvQvtCz0LjQvSDQstCy0LXQtNC10L0g0L3QtdCy0LXRgNC90L4uINCi0L7Qu9GM0LrQviDQu9Cw0YLQuNC90YHQutC40LUg0LHRg9C60LLRiy4nLFxyXG4gICAgICAgICAgICBcInBhc3NFcnJvclwiIDogJ9Cf0LDRgNC+0LvRjCDQstCy0LXQtNC10L0g0L3QtdCy0LXRgNC90L4uINCi0L7Qu9GM0Log0LvQsNGC0LjQvdGB0LrQuNC1INCx0YPQutCy0YssINGG0LjRhNGA0YsuINCU0LvQuNC90LAg0L3QtSDQvNC10L3QtdC1IDgg0YHQuNC80LLQvtC70L7QsicsXHJcbiAgICAgICAgICAgIFwibWlzc21hdGNoXCIgOiAn0J3QtdC/0YDQsNCy0LjQu9GM0L3Ri9C1INC70L7Qs9C40L0g0LjQu9C4INC/0LDRgNC+0LvRjC4nXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZShjcmVkZW50aWFscykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzRW1wdHkoY3JlZGVudGlhbHMpIFxyXG4gICAgICAgICAgICAmJiB0aGlzLmlzRW1haWxBc3NlcnRQYXR0ZXJuKGNyZWRlbnRpYWxzKSBcclxuICAgICAgICAgICAgJiYgdGhpcy5pc1Bhc3N3b3JkQXNzZXJ0UGF0dGVybihjcmVkZW50aWFscyk7ICAgICBcclxuICAgIH1cclxuXHJcbiAgICBsb2dpbihjcmVkZW50aWFscyl7XHJcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNyZWRlbnRpYWxzKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMubG9naW5VcmwsIG9wdGlvbnMpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3BvbmNlID0+IHJlc3BvbmNlLmpzb24oKSlcclxuICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5sb2dpblN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjcmVkZW50aWFscycsIEpTT04uc3RyaW5naWZ5KGNyZWRlbnRpYWxzKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RXJyb3JNc2coXCJtaXNzbWF0Y2hcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldEVycm9yTXNnKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yTXNnO1xyXG4gICAgfVxyXG4gICAgc2V0RXJyb3JNc2coa2V5KXtcclxuICAgICAgICB0aGlzLmVycm9yTXNnID0gdGhpcy5lcnJvck1zZ01hcFtrZXldO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlzRW1wdHkoY3JlZGVudGlhbHMpIHtcclxuICAgICAgICByZXR1cm4gKGNyZWRlbnRpYWxzLmxvZ2luICYmIGNyZWRlbnRpYWxzLnBhc3N3b3JkKSB8fCB0aGlzLnNldEVycm9yTXNnKFwiZW1wdHlcIik7XHJcbiAgICB9XHJcbiAgICBpc0VtYWlsQXNzZXJ0UGF0dGVybihjcmVkZW50aWFscykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVtYWlsUGF0dGVybi50ZXN0KGNyZWRlbnRpYWxzLmxvZ2luKSB8fCB0aGlzLnNldEVycm9yTXNnKFwibG9naW5FcnJvclwiKVxyXG4gICAgfVxyXG4gICAgaXNQYXNzd29yZEFzc2VydFBhdHRlcm4oY3JlZGVudGlhbHMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXNzd29yZFBhdHRlcm4udGVzdChjcmVkZW50aWFscy5wYXNzd29yZCkgfHwgdGhpcy5zZXRFcnJvck1zZyhcInBhc3NFcnJvclwiKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBsb2dvdXQoKXtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnY3JlZGVudGlhbHMnKTtcclxuICAgIH1cclxuXHJcbn1cclxuIFxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBMb2dpblZpZXcgIHsgICAgICAgIFxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ET01FbGVtZW50cyA9IHtcclxuICAgICAgICAgICAgbG9naW46IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnB1dEVtYWlsJyksXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5wdXRQYXNzd29yZCcpLFxyXG4gICAgICAgICAgICBhbGVydDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsZXJ0JyksXHJcblxyXG4gICAgICAgICAgICBsb2dJbkJ0bjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZy1pbi1idG4nKSxcclxuICAgICAgICAgICAgbG9nT3V0QnRuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9nLW91dC1idG4nKSxcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd01zZyhtc2cpIHtcclxuICAgICAgICBpZiAobXNnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuRE9NRWxlbWVudHMuYWxlcnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcbiAgICAgICAgICAgIHRoaXMuRE9NRWxlbWVudHMuYWxlcnQuaW5uZXJIVE1MID0gbXNnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoaWRlTXNnKCkge1xyXG4gICAgICAgIHRoaXMuRE9NRWxlbWVudHMuYWxlcnQuY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0xvZ291dCgpIHtcclxuICAgICAgICB0aGlzLkRPTUVsZW1lbnRzLmxvZ091dEJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlTG9nb3V0KCkge1xyXG4gICAgICAgIHRoaXMuRE9NRWxlbWVudHMubG9nT3V0QnRuLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENyZWRlbnRpYWxzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxvZ2luOiB0aGlzLkRPTUVsZW1lbnRzLmxvZ2luLnZhbHVlLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogdGhpcy5ET01FbGVtZW50cy5wYXNzd29yZC52YWx1ZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuICAgICIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW5Db250cm9sbGVyIHsgXHJcbiAgICBjb25zdHJ1Y3Rvcihtb2RlbCwgdmlldywgdXRpbHMpIHtcclxuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgICAgICB0aGlzLnV0aWxzID0gdXRpbHM7XHJcbiAgICB9ICAgICAgICBcclxuXHJcblx0XHJcblx0aW5pdCgpe1xyXG5cdFx0Y29uc29sZS5sb2coXCJtYWluIGluaXRlZFwiKVxyXG4gICAgICAgIC8vIHRoaXMubW9kZWwuZ2V0VXNlckxpc3QoKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuaW5pdExpc3RlbmVycygpXHJcbiAgICAgICAgLy8gICAgIHRoaXMudmlldy5idWlsZFVzZXJzTGlzdCh0aGlzLmdldE5leHRQYWdlKCkpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLmlzTGFzdFBhZ2UoKTtcclxuICAgICAgICAvLyB9KTsgXHRcclxuXHR9XHJcbiAgICBcclxufVxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFpblZpZXcgeyAgICAgICAgXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLkRPTUVsZW1lbnRzID0ge1xyXG4gICAgICAgIH07ICAgICBcclxuICAgICAgIFxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZmlsZUNvbnRyb2xsZXIgeyBcclxuXHRjb25zdHJ1Y3Rvcihtb2RlbCwgdmlldywgdXRpbHMpIHtcclxuXHRcdFx0dGhpcy5tb2RlbCA9IG1vZGVsO1xyXG5cdFx0XHR0aGlzLnZpZXcgPSB2aWV3O1xyXG5cdFx0XHR0aGlzLnV0aWxzID0gdXRpbHM7XHJcblx0XHRcdFxyXG5cdH1cclxuICAgXHJcblx0XHJcblx0aW5pdCgpe1xyXG5cdFx0Y29uc29sZS5sb2coXCJwcm9maWxlIGluaXRlZFwiKTtcclxuXHRcdFxyXG4gICAgICAgIC8vIHRoaXMubW9kZWwuZ2V0VXNlckxpc3QoKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuaW5pdExpc3RlbmVycygpXHJcbiAgICAgICAgLy8gICAgIHRoaXMudmlldy5idWlsZFVzZXJzTGlzdCh0aGlzLmdldE5leHRQYWdlKCkpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLmlzTGFzdFBhZ2UoKTtcclxuICAgICAgICAvLyB9KTsgXHRcclxuXHR9XHJcbiAgICBcclxufVxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZmlsZVZpZXcgeyAgICAgICAgXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLkRPTUVsZW1lbnRzID0ge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9OyAgICAgXHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgXHJcbn1cclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFV0aWxzIHtcblxuICAgIGNvbnN0cnVjdG9yKCl7XG5cdFx0XHRcblx0XHRcdFxuICAgICAgICB0aGlzLnNvcnRpbmdDb25maWcgPSB7XG4gICAgICAgICAgIFwiQVwiOiBwYWdlID0+IHtcbiAgICAgICAgICAgICAgICBwYWdlLnNvcnQoKGEsIGIpID0+e1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5lbWFpbCA+IGIuZW1haWwgPyAxIDogLTE7XG4gICAgICAgICAgICAgICAgfSk7IFxuICAgICAgICAgICAgICAgIHJldHVybiBwYWdlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiWlwiOiBwYWdlID0+IHtcbiAgICAgICAgICAgICAgICBwYWdlLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZW1haWwgPCBiLmVtYWlsID8gMSA6IC0xOztcbiAgICAgICAgICAgICAgICB9KTsgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhZ2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJBZG1pblwiOiBwYWdlID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFnZS5maWx0ZXIoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ucm9sZSA9PSBcIkFkbWluXCI7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIlVzZXJcIjogcGFnZSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhZ2UuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnJvbGUgPT0gXCJVc2VyXCI7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIkZpbmRcIjogcGFnZSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGV4cCA9IG5ldyBSZWdFeHAoZXZlbnQudGFyZ2V0LnZhbHVlLCBcImlcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFnZS5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleHAudGVzdChpdGVtLm5hbWUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgc2hvd1ZpZXcodmlld3MpIHtcbiAgICAgICAgdmlld3MuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBoaWRlVmlldyh2aWV3cykge1xuICAgICAgICB2aWV3cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIG5hdmlnYXRlVG8ocm91dGVOYW1lKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoPSBcIiNcIiArIHJvdXRlTmFtZTtcbiAgICB9XG5cbiAgICAvLyBzdGF0aWMgaXNMb2dnZWRJbigpIHtcbiAgICAvLyAgICAgbGV0IGNyZWRlbnRpYWxzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3JlZGVudGlhbHMnKSk7XG4gICAgLy8gICAgIHJldHVybiAhIWNyZWRlbnRpYWxzO1xuICAgIC8vIH1cblx0XHRzdGF0aWMgaXNMb2dnZWRJbigpIHtcbiAgICAgICAgLy9sZXQgY3JlZGVudGlhbHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjcmVkZW50aWFscycpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG5cdFx0c3RhdGljIGFjdGl2YXRlQnRuKGJ0bnMpe1xuXHRcdFx0XHRidG5zLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICAgICAgfSk7XG5cdFx0fVxuXHRcdHN0YXRpYyBkaXNhY3RpdmF0ZUJ0bihidG5zKXtcblx0XHRcdFx0YnRucy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgIH0pO1xuXHRcdH1cbiBcblxufVxuIiwiaW1wb3J0IFV0aWxzIGZyb20gJy4vdXRpbHMuanMnO1xuaW1wb3J0IE9ic2VydmVyIGZyb20gJy4vZ2FsbGVyeS9vYnNlcnZlci5qcyc7XG5cbmltcG9ydFx0TWFpbk1vZGVsIGZyb21cdCcuL21haW5QYWdlL21haW4ubW9kZWwuanMnO1xuaW1wb3J0XHRNYWluVmlldyBmcm9tXHQnLi9tYWluUGFnZS9tYWluLnZpZXcuanMnO1xuaW1wb3J0XHRNYWluQ29udHJvbGxlciBmcm9tXHQnLi9tYWluUGFnZS9tYWluLmNvbnRyb2xsZXIuanMnO1xuXG5pbXBvcnQgUHJvZmlsZUNvbnRyb2xsZXIgZnJvbSAnLi9wcm9maWxlL3Byb2ZpbGUuY29udHJvbGxlci5qcyc7XG5pbXBvcnQgUHJvZmlsZU1vZGVsIGZyb20gJy4vcHJvZmlsZS9wcm9maWxlLm1vZGVsLmpzJztcbmltcG9ydCBQcm9maWxlVmlldyBmcm9tICcuL3Byb2ZpbGUvcHJvZmlsZS52aWV3LmpzJztcblxuXG5pbXBvcnQgR2FsbGVyeUNvbnRyb2xsZXIgZnJvbSAnLi9nYWxsZXJ5L2dhbGxlcnkuY29udHJvbGxlci5qcyc7XG5pbXBvcnQgR2FsbGVyeU1vZGVsIGZyb20gJy4vZ2FsbGVyeS9nYWxsZXJ5Lm1vZGVsLmpzJztcbmltcG9ydCBHYWxsZXJ5VmlldyBmcm9tICcuL2dhbGxlcnkvZ2FsbGVyeS52aWV3LmpzJztcblxuXG5cbmltcG9ydCBMb2dpbkNvbnRyb2xsZXIgZnJvbSAnLi9sb2dpbi9sb2dpbi5jb250cm9sbGVyLmpzJztcbmltcG9ydCBMb2dpbk1vZGVsIGZyb20gJy4vbG9naW4vbG9naW4ubW9kZWwuanMnO1xuaW1wb3J0IExvZ2luVmlldyBmcm9tICcuL2xvZ2luL2xvZ2luLnZpZXcuanMnO1xuXG5sZXQgbWFpblBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21haW4tdmlld1wiKTtcbmxldCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXZpZXdcIik7XG5sZXQgZ2FsbGVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZ2FsbGVyeS12aWV3XCIpO1xubGV0IG1haW5QYWdlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtYWluUGFnZUJ0blwiKTtcbmxldCBwcm9maWxlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlQnRuXCIpO1xubGV0IGdhbGxlcnlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2dhbGxlcnlCdG5cIik7XG4vL2xldCBsb2dpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbG9naW4tdmlld1wiKTtcbi8vbGV0IGNvbnRhY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbnRhY3Qtdmlld1wiKTtcblxuXG5cbmxldCBhY3RpdmF0ZWRSb3V0ZXMgPSB7fTtcblxubGV0IHJvdXRlQ29uZmlnID0ge1xuICAgIFwibWFpblBhZ2VcIiA6IHtcbiAgICAgICAgc2hvdyA6ICgpID0+IHtcblx0XHRcdFx0XHRcdFV0aWxzLnNob3dWaWV3KFttYWluUGFnZV0pO1xuICAgICAgICAgICAgVXRpbHMuaGlkZVZpZXcoW3Byb2ZpbGUsIGdhbGxlcnldKTtcblx0XHRcdFx0XHRcdFV0aWxzLmFjdGl2YXRlQnRuKFttYWluUGFnZUJ0bl0pO1xuXHRcdFx0XHRcdFx0VXRpbHMuZGlzYWN0aXZhdGVCdG4oW3Byb2ZpbGVCdG4sIGdhbGxlcnlCdG5dKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5pdCA6ICgpID0+IHtcbiAgICAgICAgICAgIGxldCBtb2RlbCA9IG5ldyBNYWluTW9kZWw7XG4gICAgICAgICAgICBsZXQgdmlldyA9IG5ldyBNYWluVmlldztcblx0XHRcdFx0XHRcdGxldCB1dGlscyA9IG5ldyBVdGlscztcbiAgICAgICAgICAgIGxldCBtYWluQ29udGVyb2xsZXIgPSBuZXcgTWFpbkNvbnRyb2xsZXIobW9kZWwsIHZpZXcsIHV0aWxzKTtcblx0XHRcdFx0XHRcdG1haW5Db250ZXJvbGxlci5pbml0KCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwicHJvZmlsZVwiIDoge1xuICAgICAgICBzaG93IDogKCkgPT4ge1xuICAgICAgICAgICAgVXRpbHMuc2hvd1ZpZXcoW3Byb2ZpbGVdKTtcbiAgICAgICAgICAgIFV0aWxzLmhpZGVWaWV3KFttYWluUGFnZSwgZ2FsbGVyeV0pO1xuXHRcdFx0XHRcdFx0VXRpbHMuYWN0aXZhdGVCdG4oW3Byb2ZpbGVCdG5dKTtcblx0XHRcdFx0XHRcdFV0aWxzLmRpc2FjdGl2YXRlQnRuKFttYWluUGFnZUJ0biwgZ2FsbGVyeUJ0bl0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb250YWN0cyByb3V0ZSBpcyBsb2FkZWRcIilcbiAgICAgICAgfSxcbiAgICAgICAgaW5pdCA6ICgpID0+IHtcbiAgICAgICAgICAgIGxldCBtb2RlbCA9IG5ldyBQcm9maWxlTW9kZWw7XG4gICAgICAgICAgICBsZXQgdmlldyA9IG5ldyBQcm9maWxlVmlldztcblx0XHRcdFx0XHRcdGxldCB1dGlscyA9IG5ldyBVdGlscztcbiAgICAgICAgICAgIG5ldyBQcm9maWxlQ29udHJvbGxlcihtb2RlbCwgdmlldywgdXRpbHMpXG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwiZ2FsbGVyeVwiIDoge1xuICAgICAgICBzaG93IDogKCkgPT4ge1xuICAgICAgICAgICAgVXRpbHMuc2hvd1ZpZXcoW2dhbGxlcnldKTtcbiAgICAgICAgICAgIFV0aWxzLmhpZGVWaWV3KFttYWluUGFnZSwgcHJvZmlsZV0pO1xuXHRcdFx0XHRcdFx0VXRpbHMuYWN0aXZhdGVCdG4oW2dhbGxlcnlCdG5dKTtcblx0XHRcdFx0XHRcdFV0aWxzLmRpc2FjdGl2YXRlQnRuKFttYWluUGFnZUJ0biwgcHJvZmlsZUJ0bl0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJNYWluIHJvdXRlIGlzIGxvYWRlZFwiKVxuICAgICAgICB9LFxuICAgICAgICBpbml0IDogKCkgPT4ge1xuICAgICAgICAgICAgbGV0IG9ic2VydmVyID0gbmV3IE9ic2VydmVyO1xuICAgICAgICAgICAgbGV0IG1vZGVsID0gbmV3IEdhbGxlcnlNb2RlbDtcbiAgICAgICAgICAgIGxldCB2aWV3ID0gbmV3IEdhbGxlcnlWaWV3O1xuICAgICAgICAgICAgbmV3IEdhbGxlcnlDb250cm9sbGVyKG1vZGVsLCB2aWV3LCBvYnNlcnZlciwgbmV3IFV0aWxzKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhY3RpdmF0ZVJvdXRlKHJvdXRlTmFtZSl7XG4gICAgaWYgKGFjdGl2YXRlZFJvdXRlc1tyb3V0ZU5hbWVdKSB7XG4gICAgICAgIGFjdGl2YXRlZFJvdXRlc1tyb3V0ZU5hbWVdKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHJvdXRlID0gcm91dGVDb25maWdbcm91dGVOYW1lXTtcbiAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICByb3V0ZS5pbml0KCk7XG4gICAgICAgICAgICByb3V0ZS5zaG93KCk7XG4gICAgICAgICAgICBhY3RpdmF0ZWRSb3V0ZXNbcm91dGVOYW1lXSA9IHJvdXRlLnNob3c7XG4gICAgICAgIH1cbiAgICB9IFxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUm91dGUoKSB7XG4gICAgbGV0IHJvdXRlTmFtZSA9IGRvY3VtZW50LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMvLCAnJyk7XG4gICAgaWYocm91dGVOYW1lICYmICFVdGlscy5pc0xvZ2dlZEluKCkpIHtcbiAgICAgICAgVXRpbHMubmF2aWdhdGVUbyhcIlwiKTsgXG4gICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZhdGVSb3V0ZShyb3V0ZU5hbWUpO1xuICAgIH1cbiAgICBcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW5Db250cm9sbGVyIHsgXHJcbiAgICBjb25zdHJ1Y3Rvcihtb2RlbCwgdmlldywgdXRpbHMpIHtcclxuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgICAgICB0aGlzLnV0aWxzID0gdXRpbHM7XHJcbiAgICB9ICAgICAgICBcclxuXHJcblx0XHJcblx0aW5pdCgpe1xyXG5cdFx0Y29uc29sZS5sb2coXCJtYWluIGluaXRlZFwiKVxyXG4gICAgICAgIC8vIHRoaXMubW9kZWwuZ2V0VXNlckxpc3QoKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuaW5pdExpc3RlbmVycygpXHJcbiAgICAgICAgLy8gICAgIHRoaXMudmlldy5idWlsZFVzZXJzTGlzdCh0aGlzLmdldE5leHRQYWdlKCkpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLmlzTGFzdFBhZ2UoKTtcclxuICAgICAgICAvLyB9KTsgXHRcclxuXHR9XHJcbiAgICBcclxufVxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFpblZpZXcgeyAgICAgICAgXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLkRPTUVsZW1lbnRzID0ge1xyXG4gICAgICAgIH07ICAgICBcclxuICAgICAgIFxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmV2ZW50cyA9IHt9O1xuICAgIH1cblxuICAgIHN1YnNjcmliZUV2ZW50KG5hbWUsIGZ1bmMpIHtcbiAgICAgICAgdGhpcy5ldmVudHNbbmFtZV0gPSBmdW5jO1xuICAgIH1cbiAgICBcbiAgICBjYWxsRXZlbnQobmFtZSwgYXJnKSB7XG4gICAgICAgIGlmICh0aGlzLmV2ZW50c1tuYW1lXSkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHNbbmFtZV0oYXJnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbGxlcnlDb250cm9sbGVyIHsgXHJcbiAgICBjb25zdHJ1Y3Rvcihtb2RlbCwgdmlldywgb2JzZXJ2ZXIsIHV0aWxzKSB7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xyXG4gICAgICAgIHRoaXMudXRpbHMgPSB1dGlscztcclxuICAgICAgICB0aGlzLnBhZ2VDb25maWcgPSB7XHJcbiAgICAgICAgICAgIGl0ZW1zUGVyUGFnZSA6IDEwLFxyXG5cdFx0XHRjdXJyZW50UGFnZTogMFxyXG5cdFx0fVxyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfSAgICAgICAgXHJcblxyXG4gICAgaW5pdExpc3RlbmVycygpIHtcclxuXHRcdHRoaXMudmlldy5ET01FbGVtZW50cy51c2VyTGlzdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy50YWJsZUxpbmVIYW5kbGVyLmJpbmQodGhpcykpO1xyXG5cdFx0XHJcblx0XHR0aGlzLnZpZXcuRE9NRWxlbWVudHMuc2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLnNlYXJjaEhhbmRsZXIuYmluZCh0aGlzKSk7XHJcblx0XHR0aGlzLnZpZXcuRE9NRWxlbWVudHMuZW1haWxEcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5zb3J0aW5nSGFuZGxlci5iaW5kKHRoaXMpKTtcclxuXHRcdHRoaXMudmlldy5ET01FbGVtZW50cy5yb2xlRHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuc29ydGluZ0hhbmRsZXIuYmluZCh0aGlzKSk7XHJcblx0XHRcclxuICAgICAgICB0aGlzLnZpZXcuRE9NRWxlbWVudHMubmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5nZXROZXh0UGFnZUhhbmRsZXIuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGFibGVMaW5lSGFuZGxlcihldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRsZXQgaXNCdXR0b24gPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1yb3ctaWRcIik7XHJcblx0XHRpc0J1dHRvbiA/IHRoaXMub3BlbkRldGFpbChpc0J1dHRvbikgOiB0aGlzLnZpZXcuc2VsZWN0VGFibGVMaW5lKGV2ZW50KTtcclxuXHR9XHJcblxyXG5cdG9wZW5EZXRhaWwoYnV0dG9uSWQpIHtcclxuXHRcdGxldCB1c2VyID0gdGhpcy5tb2RlbC5nZXRVc2VyQnlJZChidXR0b25JZCkudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuc2hvd1NpbmdsZVVzZXIoZGF0YSk7XHJcbiAgICAgICAgfSk7IFx0XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNlYXJjaEhhbmRsZXIoZXZlbnQpIHtcclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRsZXQgdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XHJcblx0XHRpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMgJiYgKHZhbHVlLmxlbmd0aCA9PSAwIHx8IHZhbHVlLmxlbmd0aCA+IDIpKSB7XHJcblx0XHRcdHRoaXMucGFnZUNvbmZpZy5jdXJyZW50UGFnZSA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5jbGVhckxpc3QoKTtcclxuXHRcdFx0dGhpcy52aWV3LmJ1aWxkVXNlcnNMaXN0KHRoaXMuZ2V0TmV4dFBhZ2UoKSwgdGhpcy51dGlscy5zb3J0aW5nQ29uZmlnW1wiRmluZFwiXSk7XHJcblx0XHQgfVxyXG5cdH1cclxuXHJcblx0c29ydGluZ0hhbmRsZXIoZXZlbnQpIHtcclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR0aGlzLnZpZXcudXBkYXRlQnV0dG9uVGV4dChldmVudCk7XHJcblx0XHR0aGlzLmFwcGx5U29ydGluZ01ldGhvZCh0aGlzLnZpZXcuZ2V0U29ydGluZ1R5cGUoZXZlbnQpKTtcclxuXHR9XHJcbiAgICBcclxuICAgIGdldE5leHRQYWdlSGFuZGxlcihldmVudCkge1xyXG4gICAgICAgIGV2ZW50ICYmIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy52aWV3LmJ1aWxkVXNlcnNMaXN0KHRoaXMuZ2V0TmV4dFBhZ2UoKSk7XHJcbiAgICAgICAgdGhpcy5pc0xhc3RQYWdlKCk7IFxyXG4gICAgfVxyXG5cclxuXHRhcHBseVNvcnRpbmdNZXRob2Qoc29ydGluZ1R5cGUpIHtcclxuICAgICAgICBpZiAoIXNvcnRpbmdUeXBlKXtyZXR1cm59XHJcblx0XHR0aGlzLnBhZ2VDb25maWcuY3VycmVudFBhZ2UgPSAwO1xyXG4gICAgICAgIHRoaXMudmlldy5jbGVhckxpc3QoKTtcclxuXHRcdHRoaXMudmlldy5idWlsZFVzZXJzTGlzdCh0aGlzLmdldE5leHRQYWdlKCksIHRoaXMudXRpbHMuc29ydGluZ0NvbmZpZ1tzb3J0aW5nVHlwZV0pO1xyXG5cdH1cclxuXHJcbiAgICBnZXROZXh0UGFnZSgpe1xyXG5cdFx0bGV0IHN0YXJ0ID0gdGhpcy5wYWdlQ29uZmlnLml0ZW1zUGVyUGFnZSAqIHRoaXMucGFnZUNvbmZpZy5jdXJyZW50UGFnZTtcclxuXHRcdGxldCBlbmQgPSB0aGlzLnBhZ2VDb25maWcuaXRlbXNQZXJQYWdlICsgc3RhcnQ7XHJcblx0XHR0aGlzLnBhZ2VDb25maWcuY3VycmVudFBhZ2UrKztcclxuXHRcdHJldHVybiB0aGlzLm1vZGVsLnVzZXJzTGlzdERhdGEuc2xpY2Uoc3RhcnQsIGVuZCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlzTGFzdFBhZ2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNYXhQYWdlKCkpe1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuaGlkZU5leHRQYWdlKCk7XHRcclxuICAgICAgICAgICAgdGhpcy5jb3VudFN0YXRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHRpc01heFBhZ2UoKSB7XHJcblx0XHRyZXR1cm4gKHRoaXMucGFnZUNvbmZpZy5jdXJyZW50UGFnZSAqIHRoaXMucGFnZUNvbmZpZy5pdGVtc1BlclBhZ2UpID49IHRoaXMubW9kZWwudXNlcnNMaXN0RGF0YS5sZW5ndGg7XHJcblx0fVxyXG5cclxuXHRjb3VudFN0YXRzKCl7XHJcblx0XHRsZXQgc3RhdHMgPSB0aGlzLm1vZGVsLnVzZXJzTGlzdERhdGEucmVkdWNlKChzdW0sIGl0ZW0pID0+IHtcclxuXHRcdFx0KGl0ZW0ucm9sZSA9PSBcIkFkbWluXCIpID8gc3VtLmFkbWlucysrIDpcdHN1bS51c2VycysrO1xyXG5cdFx0XHRyZXR1cm4gc3VtO1xyXG5cdFx0fSwge2FkbWluczowLCB1c2VyczowfSk7XHJcblx0XHR0aGlzLnZpZXcuc2hvd1N0YXRzKHN0YXRzKTtcclxuXHR9XHJcblx0XHJcblx0aW5pdCgpe1xyXG5cdFx0Y29uc29sZS5sb2coXCJnYWxsZXJ5IGluaXRlZFwiKVxyXG4gICAgICAgIC8vIHRoaXMubW9kZWwuZ2V0VXNlckxpc3QoKS50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuaW5pdExpc3RlbmVycygpXHJcbiAgICAgICAgLy8gICAgIHRoaXMudmlldy5idWlsZFVzZXJzTGlzdCh0aGlzLmdldE5leHRQYWdlKCkpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLmlzTGFzdFBhZ2UoKTtcclxuICAgICAgICAvLyB9KTsgXHRcclxuXHR9XHJcbiAgICBcclxufVxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FsbGVyeU1vZGVsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZ2V0VXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2Vyc0xpc3QnO1xyXG4gICAgICAgIHRoaXMudXNlcnNMaXN0RGF0YSA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJMaXN0KCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLmdldFVybCkudGhlbihyZXNwb25jZSA9PiByZXNwb25jZS5qc29uKCkpXHJcbiAgICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGF0YSBpcyBsb2FkZWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMudXNlcnNMaXN0RGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH0pICAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckJ5SWQoaWQpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKHRoaXMuZ2V0VXJsICsgXCIvXCIgKyBpZCkudGhlbihyZXNwb25jZSA9PiByZXNwb25jZS5qc29uKCkpXHJcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pICAgICAgICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNhdmVVc2VyKGl0ZW0pIHsgICAgICAgICBcclxuXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHVwZGF0ZVVzZXIoY291bnRlcikge1xyXG4gICAgICBcclxuICAgIH1cclxuXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FsbGVyeVZpZXcgeyAgICAgICAgXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLkRPTUVsZW1lbnRzID0ge1xyXG4gICAgICAgIH07ICAgICBcclxuICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuIiwiaW1wb3J0IHt1cGRhdGVSb3V0ZX0gZnJvbSAnLi9yb3V0ZXIuanMnXG5cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB1cGRhdGVSb3V0ZSk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHVwZGF0ZVJvdXRlKTtcblxuIl19
